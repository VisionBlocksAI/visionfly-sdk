var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=/*#__PURE__*/t(require("next/image"));function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(null,arguments)}function i(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}var a=e.createContext(null);function o(){var t=e.useContext(a);if(!t)throw new Error("useVisionFly must be used within a VisionFlyProvider");return t}var u=["src","width","height","quality","format","blur","sharpen","brightness","contrast","saturation","hue","alt","placeholder"],s=["src","widths","sizes","quality","format","fill","alt","placeholder"];function l(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}exports.VFNextImage=function(t){var a=t.src,s=t.width,c=t.height,f=t.quality,d=t.format,v=t.blur,m=t.sharpen,g=t.brightness,b=t.contrast,p=t.saturation,y=t.hue,w=t.alt,P=void 0===w?"":w,S=t.placeholder,q=void 0===S?"blur":S,x=i(t,u),U=o(),F=U.client,O=U.ready,j=e.useState(""),L=j[0],R=j[1],I=e.useState(""),V=I[0],z=I[1],B=e.useState(!0),C=B[0],E=B[1];return e.useEffect(function(){O&&a&&function(){try{var e=l(function(){return Promise.resolve(F.getImageUrl({src:a,width:s,height:c,quality:f,format:d,blur:v,sharpen:m,brightness:g,contrast:b,saturation:p,hue:y})).then(function(e){function t(){E(!1)}R(e);var r=function(){if("blur"===q)return Promise.resolve(F.getImageUrl({src:a,width:20,quality:20,format:"webp",blur:10})).then(function(e){return Promise.resolve(fetch(e)).then(function(e){return Promise.resolve(e.arrayBuffer()).then(function(e){var t=Buffer.from(e).toString("base64");z("data:image/webp;base64,"+t)})})})}();return r&&r.then?r.then(t):t()})},function(e){console.error("Failed to load image:",e),E(!1)});return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}()},[F,O,a,s,c,f,d,v,m,g,b,p,y,q]),C||!L?h("div",{style:{width:s||"100%",height:c||"300px",backgroundColor:"#f0f0f0"}}):h(r.default,n({src:L,alt:P,width:s,height:c,blurDataURL:V,placeholder:q},x))},exports.VFNextResponsiveImage=function(t){var a=t.src,u=t.widths,c=t.sizes,f=t.quality,d=t.format,v=t.fill,m=void 0===v||v,g=t.alt,b=void 0===g?"":g,p=t.placeholder,y=void 0===p?"blur":p,w=i(t,s),P=o(),S=P.client,q=P.ready,x=e.useState(null),U=x[0],F=x[1],O=e.useState(""),j=O[0],L=O[1],R=e.useState(!0),I=R[0],V=R[1];return e.useEffect(function(){q&&a&&function(){try{var e=l(function(){return Promise.resolve(S.getSrcSet({src:a,widths:u,format:d,quality:f})).then(function(e){function t(){V(!1)}F(e);var r=function(){if("blur"===y)return Promise.resolve(S.getImageUrl({src:a,width:20,quality:20,format:"webp",blur:10})).then(function(e){return Promise.resolve(fetch(e)).then(function(e){return Promise.resolve(e.arrayBuffer()).then(function(e){var t=Buffer.from(e).toString("base64");L("data:image/webp;base64,"+t)})})})}();return r&&r.then?r.then(t):t()})},function(e){console.error("Failed to load srcset:",e),V(!1)});return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}()},[S,q,a,u&&JSON.stringify(u),f,d,y]),I||!U?h("div",{style:{position:m?"relative":"static",width:"100%",height:m?"100%":"300px",backgroundColor:"#f0f0f0"}}):h(r.default,n({src:U.default,alt:b,blurDataURL:j,placeholder:y,fill:m,sizes:c||U.sizes,loader:function(e){var t=e.width,r=new URL(e.src),n=Object.fromEntries(r.searchParams.entries());t&&(n.w=t);var i=new URLSearchParams(n);return""+r.origin+r.pathname+"?"+i.toString()}},w))},exports.setupVisionFly=function(e,t){return void 0===t&&(t={}),{imageLoader:function(r){var n=r.src,i=r.width,a=r.quality;return n.includes(e.baseUrl||"api.visionfly.ai")?n:(e.baseUrl||"https://api.visionfly.ai")+"/transform?"+new URLSearchParams({src:n,w:i||"",q:a||80,f:t.defaultFormat||"auto"}).toString()}}};
//# sourceMappingURL=next.js.map
